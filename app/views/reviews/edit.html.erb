<% provide(:title, 'Update review') %>

<div class="row">
  <div class="col-sm-6 col-sm-offset-3">
    <h2>Review for <%= @place.name %>:</h2>
    <div class="form-group">
      <%= form_for(@review) do |f| %>
        <%= render 'shared/error_messages', object: f.object %>

        <%= f.label :rating %>
        <%= f.hidden_field :rating, :value => @review.rating %>
        <div id="user_star"></div><br>

        <%= f.label :content %>
        <%= f.text_area :content, rows: "7", placeholder: "Compose review...", class: "form-control" %>

        <%= f.hidden_field :place_id, :value => params[:id] %>

        <%= f.submit "Publish review", class: "btn btn-large btn-primary" %>
        
      <% end %>
    </div>
  </div>
</div>
<script type="text/javascript">
  $('#user_star').raty({
    score: <%= @review.rating %>,
    path: '/assets',
    click: function(score, evt) {
      document.getElementById('review_rating').value = score;
      $.ajax({
        data: { score: score }
      }).done(function (data){});
    }
  });
</script>